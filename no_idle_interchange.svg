out.perf-folded:interchange;run_no_events 13
out.perf-folded:interchange;system_call_fastpath;sys_exit_group;do_group_exit;do_exit;exit_files;put_files_struct;filp_close;nfs_file_flush;vfs_fsync;vfs_fsync_range;nfs_file_fsync;nfs_commit_inode;nfs_initiate_commit;rpc_put_task;rpc_do_put_task;rpc_final_put_task;rpc_free_task;rpc_release_calldata;nfs_commit_release;nfs_commit_release_pages 1
out.perf-folded:perf;__execve;stub_execve;sys_execve;do_execve;search_binary_handler;load_elf_binary;flush_old_exec;mmput;exit_mmap;free_pgtables;unlink_anon_vmas;list_del 1
out.perf-folded:perf;__libc_start_main;main;run_builtin;cmd_record;__GI___ioctl;system_call_fastpath;sys_ioctl;do_vfs_ioctl;vfs_ioctl;perf_ioctl;perf_event_for_each_child;perf_event_enable;smp_call_function_single;generic_exec_single 1
out.perf-folded:perf;__libc_start_main;main;run_builtin;cmd_record;__GI___ioctl;system_call_fastpath;sys_ioctl;do_vfs_ioctl;vfs_ioctl;perf_ioctl;perf_event_for_each_child;perf_event_enable;smp_call_function_single;remote_function;__perf_event_enable;group_sched_in;x86_pmu_commit_txn;perf_pmu_enable;x86_pmu_enable;intel_pmu_nhm_enable_all;intel_pmu_enable_all;native_write_msr_safe 4
out.perf-folded:perf;__libc_start_main;main;run_builtin;cmd_record;perf_evlist__prepare_workload;__execve;stub_execve;sys_execve;do_execve;open_exec;do_filp_open;do_path_lookup;path_walk;__link_path_walk;do_lookup;nfs_lookup_revalidate;__nfs_revalidate_inode;nfs3_proc_getattr;nfs3_rpc_wrapper.clone.0;rpc_call_sync;rpc_run_task;rpc_execute;__rpc_execute;call_transmit;xprt_transmit;xs_tcp_send_request;xs_sendpages;xs_send_kvec;kernel_sendmsg;sock_sendmsg;tcp_sendmsg;tcp_send_mss 1
out.perf-folded:perf;__libc_start_main;main;run_builtin;cmd_record;perf_evlist__prepare_workload;__execve;stub_execve;sys_execve;do_execve;open_exec;do_filp_open;may_open;inode_permission;nfs_permission;nfs_do_access;nfs3_proc_access;nfs3_rpc_wrapper.clone.0;rpc_call_sync;rpc_run_task;rpc_execute;__rpc_execute;call_transmit;xprt_transmit;xs_tcp_send_request;xs_sendpages;xs_send_kvec;kernel_sendmsg;sock_sendmsg;tcp_sendmsg;tcp_push;__tcp_push_pending_frames;tcp_write_xmit;tcp_transmit_skb;ip_queue_xmit;ip_local_out;ip_output;ip_finish_output;dev_queue_xmit;__skb_tx_hash 1
/share/jade/SOFT/FlameGraph/flamegraph.pl:#!/usr/bin/perl -w
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# flamegraph.pl		flame stack grapher.
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# This takes stack samples and renders a call graph, allowing hot functions
/share/jade/SOFT/FlameGraph/flamegraph.pl:# and codepaths to be quickly identified.  Stack samples can be generated using
/share/jade/SOFT/FlameGraph/flamegraph.pl:# tools such as DTrace, perf, SystemTap, and Instruments.
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# USAGE: ./flamegraph.pl [options] input.txt > graph.svg
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:#        grep funcA input.txt | ./flamegraph.pl [options] > graph.svg
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# Options are listed in the usage message (--help).
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# The input is stack frames and sample counts formatted as single lines.  Each
/share/jade/SOFT/FlameGraph/flamegraph.pl:# frame in the stack is semicolon separated, with a space and count at the end
/share/jade/SOFT/FlameGraph/flamegraph.pl:# of the line.  These can be generated using DTrace with stackcollapse.pl,
/share/jade/SOFT/FlameGraph/flamegraph.pl:# and other tools using the stackcollapse variants.
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# An optional extra column of counts can be provided to generate a differential
/share/jade/SOFT/FlameGraph/flamegraph.pl:# flame graph of the counts, colored red for more, and blue for less.  This
/share/jade/SOFT/FlameGraph/flamegraph.pl:# can be useful when using flame graphs for non-regression testing.
/share/jade/SOFT/FlameGraph/flamegraph.pl:# See the header comment in the difffolded.pl program for instructions.
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# The output graph shows relative presence of functions in stack samples.  The
/share/jade/SOFT/FlameGraph/flamegraph.pl:# ordering on the x-axis has no meaning; since the data is samples, time order
/share/jade/SOFT/FlameGraph/flamegraph.pl:# of events is not known.  The order used sorts function names alphabetically.
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# While intended to process stack samples, this can also process stack traces.
/share/jade/SOFT/FlameGraph/flamegraph.pl:# For example, tracing stacks for memory allocation, or resource usage.  You
/share/jade/SOFT/FlameGraph/flamegraph.pl:# can use --title to set the title to reflect the content, and --countname
/share/jade/SOFT/FlameGraph/flamegraph.pl:# to change "samples" to "bytes" etc.
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# There are a few different palettes, selectable using --color.  By default,
/share/jade/SOFT/FlameGraph/flamegraph.pl:# the colors are selected at random (except for differentials).  Functions
/share/jade/SOFT/FlameGraph/flamegraph.pl:# called "-" will be printed gray, which can be used for stack separators (eg,
/share/jade/SOFT/FlameGraph/flamegraph.pl:# between user and kernel stacks).
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# HISTORY
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# This was inspired by Neelakanth Nadgir's excellent function_call_graph.rb
/share/jade/SOFT/FlameGraph/flamegraph.pl:# program, which visualized function entry and return trace events.  As Neel
/share/jade/SOFT/FlameGraph/flamegraph.pl:# wrote: "The output displayed is inspired by Roch's CallStackAnalyzer which
/share/jade/SOFT/FlameGraph/flamegraph.pl:# was in turn inspired by the work on vftrace by Jan Boerhout".  See:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# https://blogs.oracle.com/realneel/entry/visualizing_callstacks_via_dtrace_and
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# Copyright 2011 Joyent, Inc.  All rights reserved.
/share/jade/SOFT/FlameGraph/flamegraph.pl:# Copyright 2011 Brendan Gregg.  All rights reserved.
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# CDDL HEADER START
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# The contents of this file are subject to the terms of the
/share/jade/SOFT/FlameGraph/flamegraph.pl:# Common Development and Distribution License (the "License").
/share/jade/SOFT/FlameGraph/flamegraph.pl:# You may not use this file except in compliance with the License.
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# You can obtain a copy of the license at docs/cddl1.txt or
/share/jade/SOFT/FlameGraph/flamegraph.pl:# http://opensource.org/licenses/CDDL-1.0.
/share/jade/SOFT/FlameGraph/flamegraph.pl:# See the License for the specific language governing permissions
/share/jade/SOFT/FlameGraph/flamegraph.pl:# and limitations under the License.
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# When distributing Covered Code, include this CDDL HEADER in each
/share/jade/SOFT/FlameGraph/flamegraph.pl:# file and include the License file at docs/cddl1.txt.
/share/jade/SOFT/FlameGraph/flamegraph.pl:# If applicable, add the following below this CDDL HEADER, with the
/share/jade/SOFT/FlameGraph/flamegraph.pl:# fields enclosed by brackets "[]" replaced with your own identifying
/share/jade/SOFT/FlameGraph/flamegraph.pl:# information: Portions Copyright [yyyy] [name of copyright owner]
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# CDDL HEADER END
/share/jade/SOFT/FlameGraph/flamegraph.pl:#
/share/jade/SOFT/FlameGraph/flamegraph.pl:# 21-Nov-2013   Shawn Sterling  Added consistent palette file option
/share/jade/SOFT/FlameGraph/flamegraph.pl:# 17-Mar-2013   Tim Bunce       Added options and more tunables.
/share/jade/SOFT/FlameGraph/flamegraph.pl:# 15-Dec-2011	Dave Pacheco	Support for frames with whitespace.
/share/jade/SOFT/FlameGraph/flamegraph.pl:# 10-Sep-2011	Brendan Gregg	Created this.
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:use strict;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:use Getopt::Long;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# tunables
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $encoding;
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $fonttype = "Verdana";
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $imagewidth = 1200;          # max width, pixels
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $frameheight = 16;           # max height is dynamic
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $fontsize = 12;              # base text size
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $fontwidth = 0.59;           # avg width relative to fontsize
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $minwidth = 0.1;             # min function width, pixels
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $nametype = "Function:";     # what are the names in the data?
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $countname = "samples";      # what are the counts in the data?
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $colors = "hot";             # color theme
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $bgcolor1 = "#eeeeee";       # background color gradient start
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $bgcolor2 = "#eeeeb0";       # background color gradient stop
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $nameattrfile;               # file holding function attributes
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $timemax;                    # (override the) sum of the counts
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $factor = 1;                 # factor to scale counts by
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $hash = 0;                   # color by function name
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $palette = 0;                # if we use consistent palettes (default off)
/share/jade/SOFT/FlameGraph/flamegraph.pl:my %palette_map;                # palette map hash
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $pal_file = "palette.map";   # palette map file name
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $stackreverse = 0;           # reverse stack order, switching merge end
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $inverted = 0;               # icicle graph
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $negate = 0;                 # switch differential hues
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $titletext = "";             # centered heading
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $titledefault = "Flame Graph";	# overwritten by --title
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $titleinverted = "Icicle Graph";	#   "    "
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:GetOptions(
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'fonttype=s'  => \$fonttype,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'width=i'     => \$imagewidth,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'height=i'    => \$frameheight,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'encoding=s'  => \$encoding,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'fontsize=f'  => \$fontsize,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'fontwidth=f' => \$fontwidth,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'minwidth=f'  => \$minwidth,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'title=s'     => \$titletext,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'nametype=s'  => \$nametype,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'countname=s' => \$countname,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'nameattr=s'  => \$nameattrfile,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'total=s'     => \$timemax,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'factor=f'    => \$factor,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'colors=s'    => \$colors,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'hash'        => \$hash,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'cp'          => \$palette,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'reverse'     => \$stackreverse,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'inverted'    => \$inverted,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	'negate'      => \$negate,
/share/jade/SOFT/FlameGraph/flamegraph.pl:) or die <<USAGE_END;
/share/jade/SOFT/FlameGraph/flamegraph.pl:USAGE: $0 [options] infile > outfile.svg\n
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--title       # change title text
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--width       # width of image (default 1200)
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--height      # height of each frame (default 16)
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--minwidth    # omit smaller functions (default 0.1 pixels)
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--fonttype    # font type (default "Verdana")
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--fontsize    # font size (default 12)
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--countname   # count type label (default "samples")
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--nametype    # name type label (default "Function:")
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--colors      # set color palette. choices are: hot (default), mem, io,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	              # java, js, red, green, blue, yellow, purple, orange
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--hash        # colors are keyed by function name hash
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--cp          # use consistent palette (palette.map)
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--reverse     # generate stack-reversed flame graph
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--inverted    # icicle graph
/share/jade/SOFT/FlameGraph/flamegraph.pl:	--negate      # switch differential hues (blue<->red)
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	eg,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$0 --title="Flame Graph: malloc()" trace.txt > graph.svg
/share/jade/SOFT/FlameGraph/flamegraph.pl:USAGE_END
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# internals
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $ypad1 = $fontsize * 4;      # pad top, include title
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $ypad2 = $fontsize * 2 + 10; # pad bottom, include labels
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $xpad = 10;                  # pad lefm and right
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $framepad = 1;		# vertical padding for frames
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $depthmax = 0;
/share/jade/SOFT/FlameGraph/flamegraph.pl:my %Events;
/share/jade/SOFT/FlameGraph/flamegraph.pl:my %nameattr;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:if ($titletext eq "") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	unless ($inverted) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$titletext = $titledefault;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	} else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$titletext = $titleinverted;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:if ($nameattrfile) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# The name-attribute file format is a function name followed by a tab then
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# a sequence of tab separated name=value pairs.
/share/jade/SOFT/FlameGraph/flamegraph.pl:	open my $attrfh, $nameattrfile or die "Can't read $nameattrfile: $!\n";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	while (<$attrfh>) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		chomp;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my ($funcname, $attrstr) = split /\t/, $_, 2;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		die "Invalid format in $nameattrfile" unless defined $attrstr;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$nameattr{$funcname} = { map { split /=/, $_, 2 } split /\t/, $attrstr };
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:if ($colors eq "mem") { $bgcolor1 = "#eeeeee"; $bgcolor2 = "#e0e0ff"; }
/share/jade/SOFT/FlameGraph/flamegraph.pl:if ($colors eq "io")  { $bgcolor1 = "#f8f8f8"; $bgcolor2 = "#e8e8e8"; }
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# SVG functions
/share/jade/SOFT/FlameGraph/flamegraph.pl:{ package SVG;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	sub new {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $class = shift;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $self = {};
/share/jade/SOFT/FlameGraph/flamegraph.pl:		bless ($self, $class);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return $self;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	sub header {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my ($self, $w, $h) = @_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $enc_attr = '';
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (defined $encoding) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$enc_attr = qq{ encoding="$encoding"};
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$self->{svg} .= <<SVG;
/share/jade/SOFT/FlameGraph/flamegraph.pl:<?xml version="1.0"$enc_attr standalone="no"?>
/share/jade/SOFT/FlameGraph/flamegraph.pl:<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
/share/jade/SOFT/FlameGraph/flamegraph.pl:<svg version="1.1" width="$w" height="$h" onload="init(evt)" viewBox="0 0 $w $h" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
/share/jade/SOFT/FlameGraph/flamegraph.pl:SVG
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	sub include {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my ($self, $content) = @_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$self->{svg} .= $content;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	sub colorAllocate {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my ($self, $r, $g, $b) = @_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "rgb($r,$g,$b)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	sub group_start {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my ($self, $attr) = @_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my @g_attr = map {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			exists $attr->{$_} ? sprintf(qq/$_="%s"/, $attr->{$_}) : ()
/share/jade/SOFT/FlameGraph/flamegraph.pl:		} qw(class style onmouseover onmouseout onclick);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		push @g_attr, $attr->{g_extra} if $attr->{g_extra};
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$self->{svg} .= sprintf qq/<g %s>\n/, join(' ', @g_attr);
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$self->{svg} .= sprintf qq/<title>%s<\/title>/, $attr->{title}
/share/jade/SOFT/FlameGraph/flamegraph.pl:			if $attr->{title}; # should be first element within g container
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if ($attr->{href}) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			my @a_attr;
/share/jade/SOFT/FlameGraph/flamegraph.pl:			push @a_attr, sprintf qq/xlink:href="%s"/, $attr->{href} if $attr->{href};
/share/jade/SOFT/FlameGraph/flamegraph.pl:			# default target=_top else links will open within SVG <object>
/share/jade/SOFT/FlameGraph/flamegraph.pl:			push @a_attr, sprintf qq/target="%s"/, $attr->{target} || "_top";
/share/jade/SOFT/FlameGraph/flamegraph.pl:			push @a_attr, $attr->{a_extra}                           if $attr->{a_extra};
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$self->{svg} .= sprintf qq/<a %s>/, join(' ', @a_attr);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	sub group_end {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my ($self, $attr) = @_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$self->{svg} .= qq/<\/a>\n/ if $attr->{href};
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$self->{svg} .= qq/<\/g>\n/;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	sub filledRectangle {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my ($self, $x1, $y1, $x2, $y2, $fill, $extra) = @_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$x1 = sprintf "%0.1f", $x1;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$x2 = sprintf "%0.1f", $x2;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $w = sprintf "%0.1f", $x2 - $x1;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $h = sprintf "%0.1f", $y2 - $y1;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$extra = defined $extra ? $extra : "";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$self->{svg} .= qq/<rect x="$x1" y="$y1" width="$w" height="$h" fill="$fill" $extra \/>\n/;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	sub stringTTF {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my ($self, $color, $font, $size, $angle, $x, $y, $str, $loc, $extra) = @_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$x = sprintf "%0.2f", $x;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$loc = defined $loc ? $loc : "left";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$extra = defined $extra ? $extra : "";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$self->{svg} .= qq/<text text-anchor="$loc" x="$x" y="$y" font-size="$size" font-family="$font" fill="$color" $extra >$str<\/text>\n/;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	sub svg {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $self = shift;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "$self->{svg}</svg>\n";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	1;
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:sub namehash {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# Generate a vector hash for the name string, weighting early over
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# later characters. We want to pick the same colors for function
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# names across different flame graphs.
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $name = shift;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $vector = 0;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $weight = 1;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $max = 1;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $mod = 10;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# if module name present, trunc to 1st char
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$name =~ s/.(.*?)`//;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	foreach my $c (split //, $name) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $i = (ord $c) % $mod;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$vector += ($i / ($mod++ - 1)) * $weight;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$max += 1 * $weight;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$weight *= 0.70;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		last if $mod > 12;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	return (1 - $vector / $max)
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:sub color {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my ($type, $hash, $name) = @_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my ($v1, $v2, $v3);
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if ($hash) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$v1 = namehash($name);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$v2 = $v3 = namehash(scalar reverse $name);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	} else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$v1 = rand(1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$v2 = rand(1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$v3 = rand(1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# theme palettes
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "hot") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $r = 205 + int(50 * $v3);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $g = 0 + int(230 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $b = 0 + int(55 * $v2);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "rgb($r,$g,$b)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "mem") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $r = 0;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $g = 190 + int(50 * $v2);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $b = 0 + int(210 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "rgb($r,$g,$b)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "io") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $r = 80 + int(60 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $g = $r;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $b = 190 + int(55 * $v2);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "rgb($r,$g,$b)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# multi palettes
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "java") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if ($name =~ /::/) {		# C++
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$type = "yellow";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		} elsif ($name =~ m:/:) {	# Java (match "/" in path)
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$type = "green"
/share/jade/SOFT/FlameGraph/flamegraph.pl:		} else {			# system
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$type = "red";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		# fall-through to color palettes
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "js") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if ($name =~ /::/) {		# C++
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$type = "yellow";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		} elsif ($name =~ m:/:) {	# JavaScript (match "/" in path)
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$type = "green"
/share/jade/SOFT/FlameGraph/flamegraph.pl:		} elsif ($name =~ m/:/) {	# JavaScript (match ":" in builtin)
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$type = "aqua"
/share/jade/SOFT/FlameGraph/flamegraph.pl:		} elsif ($name =~ m/^ $/) {	# Missing symbol
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$type = "green"
/share/jade/SOFT/FlameGraph/flamegraph.pl:		} else {			# system
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$type = "red";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		# fall-through to color palettes
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# color palettes
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "red") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $r = 200 + int(55 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $x = 50 + int(80 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "rgb($r,$x,$x)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "green") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $g = 200 + int(55 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $x = 50 + int(60 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "rgb($x,$g,$x)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "blue") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $b = 205 + int(50 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $x = 80 + int(60 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "rgb($x,$x,$b)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "yellow") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $x = 175 + int(55 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $b = 50 + int(20 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "rgb($x,$x,$b)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "purple") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $x = 190 + int(65 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $g = 80 + int(60 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "rgb($x,$g,$x)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "aqua") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $r = 50 + int(60 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $g = 165 + int(55 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $b = 165 + int(55 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "rgb($r,$g,$b)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $type and $type eq "orange") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $r = 190 + int(65 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $g = 90 + int(65 * $v1);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return "rgb($r,$g,0)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	return "rgb(0,0,0)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:sub color_scale {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my ($value, $max) = @_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my ($r, $g, $b) = (255, 255, 255);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$value = -$value if $negate;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if ($value > 0) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$g = $b = int(210 * ($max - $value) / $max);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	} elsif ($value < 0) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$r = $g = int(210 * ($max + $value) / $max);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	return "rgb($r,$g,$b)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:sub color_map {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my ($colors, $func) = @_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (exists $palette_map{$func}) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return $palette_map{$func};
/share/jade/SOFT/FlameGraph/flamegraph.pl:	} else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$palette_map{$func} = color($colors);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return $palette_map{$func};
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:sub write_palette {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	open(FILE, ">$pal_file");
/share/jade/SOFT/FlameGraph/flamegraph.pl:	foreach my $key (sort keys %palette_map) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		print FILE $key."->".$palette_map{$key}."\n";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	close(FILE);
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:sub read_palette {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (-e $pal_file) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	open(FILE, $pal_file) or die "can't open file $pal_file: $!";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	while ( my $line = <FILE>) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		chomp($line);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		(my $key, my $value) = split("->",$line);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$palette_map{$key}=$value;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	close(FILE)
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:my %Node;	# Hash of merged frame data
/share/jade/SOFT/FlameGraph/flamegraph.pl:my %Tmp;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# flow() merges two stacks, storing the merged frames and value data in %Node.
/share/jade/SOFT/FlameGraph/flamegraph.pl:sub flow {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my ($last, $this, $v, $d) = @_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $len_a = @$last - 1;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $len_b = @$this - 1;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $i = 0;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $len_same;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	for (; $i <= $len_a; $i++) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		last if $i > $len_b;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		last if $last->[$i] ne $this->[$i];
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$len_same = $i;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	for ($i = $len_a; $i >= $len_same; $i--) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $k = "$last->[$i];$i";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		# a unique ID is constructed from "func;depth;etime";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		# func-depth isn't unique, it may be repeated later.
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$Node{"$k;$v"}->{stime} = delete $Tmp{$k}->{stime};
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (defined $Tmp{$k}->{delta}) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$Node{"$k;$v"}->{delta} = delete $Tmp{$k}->{delta};
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		delete $Tmp{$k};
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	for ($i = $len_same; $i <= $len_b; $i++) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $k = "$this->[$i];$i";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$Tmp{$k}->{stime} = $v;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (defined $d) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$Tmp{$k}->{delta} += $i == $len_b ? $d : 0;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:        return $this;
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# parse input
/share/jade/SOFT/FlameGraph/flamegraph.pl:my @Data;
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $last = [];
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $time = 0;
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $delta = undef;
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $ignored = 0;
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $line;
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $maxdelta = 1;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# reverse if needed
/share/jade/SOFT/FlameGraph/flamegraph.pl:foreach (<>) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	chomp;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$line = $_;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if ($stackreverse) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		# there may be an extra samples column for differentials
/share/jade/SOFT/FlameGraph/flamegraph.pl:		# XXX todo: redo these REs as one. It's repeated below.
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my ($stack, $samples) = (/^(.*)\s+?(\d+(?:\.\d*)?)$/);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $samples2 = undef;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if ($stack =~ /^(.*)\s+?(\d+(?:\.\d*)?)$/) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$samples2 = $samples;
/share/jade/SOFT/FlameGraph/flamegraph.pl:			($stack, $samples) = $stack =~ (/^(.*)\s+?(\d+(?:\.\d*)?)$/);
/share/jade/SOFT/FlameGraph/flamegraph.pl:			unshift @Data, join(";", reverse split(";", $stack)) . " $samples $samples2";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		} else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			unshift @Data, join(";", reverse split(";", $stack)) . " $samples";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	} else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		unshift @Data, $line;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# process and merge frames
/share/jade/SOFT/FlameGraph/flamegraph.pl:foreach (sort @Data) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	chomp;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# process: folded_stack count
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# eg: func_a;func_b;func_c 31
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my ($stack, $samples) = (/^(.*)\s+?(\d+(?:\.\d*)?)$/);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	unless (defined $samples and defined $stack) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		++$ignored;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		next;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# there may be an extra samples column for differentials:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $samples2 = undef;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if ($stack =~ /^(.*)\s+?(\d+(?:\.\d*)?)$/) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$samples2 = $samples;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		($stack, $samples) = $stack =~ (/^(.*)\s+?(\d+(?:\.\d*)?)$/);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$delta = undef;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $samples2) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$delta = $samples2 - $samples;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$maxdelta = abs($delta) if abs($delta) > $maxdelta;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$stack =~ tr/<>/()/;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# merge frames and populate %Node:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$last = flow($last, [ '', split ";", $stack ], $time, $delta);
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (defined $samples2) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$time += $samples2;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	} else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$time += $samples;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:flow($last, [], $time, $delta);
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:warn "Ignored $ignored lines with invalid format\n" if $ignored;
/share/jade/SOFT/FlameGraph/flamegraph.pl:unless ($time) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	warn "ERROR: No stack counts found\n";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $im = SVG->new();
/share/jade/SOFT/FlameGraph/flamegraph.pl:	# emit an error message SVG, for tools automating flamegraph use
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $imageheight = $fontsize * 5;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$im->header($imagewidth, $imageheight);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$im->stringTTF($im->colorAllocate(0, 0, 0), $fonttype, $fontsize + 2,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	    0.0, int($imagewidth / 2), $fontsize * 2,
/share/jade/SOFT/FlameGraph/flamegraph.pl:	    "ERROR: No valid input provided to flamegraph.pl.", "middle");
/share/jade/SOFT/FlameGraph/flamegraph.pl:	print $im->svg;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	exit 2;
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:if ($timemax and $timemax < $time) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	warn "Specified --total $timemax is less than actual total $time, so ignored\n"
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if $timemax/$time > 0.02; # only warn is significant (e.g., not rounding etc)
/share/jade/SOFT/FlameGraph/flamegraph.pl:	undef $timemax;
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:$timemax ||= $time;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $widthpertime = ($imagewidth - 2 * $xpad) / $timemax;
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $minwidth_time = $minwidth / $widthpertime;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# prune blocks that are too narrow and determine max depth
/share/jade/SOFT/FlameGraph/flamegraph.pl:while (my ($id, $node) = each %Node) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my ($func, $depth, $etime) = split ";", $id;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $stime = $node->{stime};
/share/jade/SOFT/FlameGraph/flamegraph.pl:	die "missing start for $id" if not defined $stime;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if (($etime-$stime) < $minwidth_time) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		delete $Node{$id};
/share/jade/SOFT/FlameGraph/flamegraph.pl:		next;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$depthmax = $depth if $depth > $depthmax;
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# draw canvas, and embed interactive JavaScript program
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $imageheight = ($depthmax * $frameheight) + $ypad1 + $ypad2;
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $im = SVG->new();
/share/jade/SOFT/FlameGraph/flamegraph.pl:$im->header($imagewidth, $imageheight);
/share/jade/SOFT/FlameGraph/flamegraph.pl:my $inc = <<INC;
/share/jade/SOFT/FlameGraph/flamegraph.pl:<defs >
/share/jade/SOFT/FlameGraph/flamegraph.pl:	<linearGradient id="background" y1="0" y2="1" x1="0" x2="0" >
/share/jade/SOFT/FlameGraph/flamegraph.pl:		<stop stop-color="$bgcolor1" offset="5%" />
/share/jade/SOFT/FlameGraph/flamegraph.pl:		<stop stop-color="$bgcolor2" offset="95%" />
/share/jade/SOFT/FlameGraph/flamegraph.pl:	</linearGradient>
/share/jade/SOFT/FlameGraph/flamegraph.pl:</defs>
/share/jade/SOFT/FlameGraph/flamegraph.pl:<style type="text/css">
/share/jade/SOFT/FlameGraph/flamegraph.pl:	.func_g:hover { stroke:black; stroke-width:0.5; cursor:pointer; }
/share/jade/SOFT/FlameGraph/flamegraph.pl:</style>
/share/jade/SOFT/FlameGraph/flamegraph.pl:<script type="text/ecmascript">
/share/jade/SOFT/FlameGraph/flamegraph.pl:<![CDATA[
/share/jade/SOFT/FlameGraph/flamegraph.pl:	var details, svg;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function init(evt) { 
/share/jade/SOFT/FlameGraph/flamegraph.pl:		details = document.getElementById("details").firstChild; 
/share/jade/SOFT/FlameGraph/flamegraph.pl:		svg = document.getElementsByTagName("svg")[0];
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function s(info) { details.nodeValue = "$nametype " + info; }
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function c() { details.nodeValue = ' '; }
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function find_child(parent, name, attr) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var children = parent.childNodes;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		for (var i=0; i<children.length;i++) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			if (children[i].tagName == name)
/share/jade/SOFT/FlameGraph/flamegraph.pl:				return (attr != undefined) ? children[i].attributes[attr].value : children[i];
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		return;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function orig_save(e, attr, val) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (e.attributes["_orig_"+attr] != undefined) return;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (e.attributes[attr] == undefined) return;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (val == undefined) val = e.attributes[attr].value;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		e.setAttribute("_orig_"+attr, val);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function orig_load(e, attr) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (e.attributes["_orig_"+attr] == undefined) return;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		e.attributes[attr].value = e.attributes["_orig_"+attr].value;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		e.removeAttribute("_orig_"+attr);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function update_text(e) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var r = find_child(e, "rect");
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var t = find_child(e, "text");
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var w = parseFloat(r.attributes["width"].value) -3;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var txt = find_child(e, "title").textContent.replace(/\\([^(]*\\)/,"");
/share/jade/SOFT/FlameGraph/flamegraph.pl:		t.attributes["x"].value = parseFloat(r.attributes["x"].value) +3;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		
/share/jade/SOFT/FlameGraph/flamegraph.pl:		// Smaller than this size won't fit anything
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (w < 2*$fontsize*$fontwidth) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			t.textContent = "";
/share/jade/SOFT/FlameGraph/flamegraph.pl:			return;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		
/share/jade/SOFT/FlameGraph/flamegraph.pl:		t.textContent = txt;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		// Fit in full text width
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (/^ *\$/.test(txt) || t.getSubStringLength(0, txt.length) < w)
/share/jade/SOFT/FlameGraph/flamegraph.pl:			return;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		
/share/jade/SOFT/FlameGraph/flamegraph.pl:		for (var x=txt.length-2; x>0; x--) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			if (t.getSubStringLength(0, x+2) <= w) { 
/share/jade/SOFT/FlameGraph/flamegraph.pl:				t.textContent = txt.substring(0,x) + "..";
/share/jade/SOFT/FlameGraph/flamegraph.pl:				return;
/share/jade/SOFT/FlameGraph/flamegraph.pl:			}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		t.textContent = "";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function zoom_reset(e) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (e.attributes != undefined) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			orig_load(e, "x");
/share/jade/SOFT/FlameGraph/flamegraph.pl:			orig_load(e, "width");
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (e.childNodes == undefined) return;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		for(var i=0, c=e.childNodes; i<c.length; i++) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			zoom_reset(c[i]);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function zoom_child(e, x, ratio) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (e.attributes != undefined) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			if (e.attributes["x"] != undefined) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:				orig_save(e, "x");
/share/jade/SOFT/FlameGraph/flamegraph.pl:				e.attributes["x"].value = (parseFloat(e.attributes["x"].value) - x - $xpad) * ratio + $xpad;
/share/jade/SOFT/FlameGraph/flamegraph.pl:				if(e.tagName == "text") e.attributes["x"].value = find_child(e.parentNode, "rect", "x") + 3;
/share/jade/SOFT/FlameGraph/flamegraph.pl:			}
/share/jade/SOFT/FlameGraph/flamegraph.pl:			if (e.attributes["width"] != undefined) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:				orig_save(e, "width");
/share/jade/SOFT/FlameGraph/flamegraph.pl:				e.attributes["width"].value = parseFloat(e.attributes["width"].value) * ratio;
/share/jade/SOFT/FlameGraph/flamegraph.pl:			}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (e.childNodes == undefined) return;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		for(var i=0, c=e.childNodes; i<c.length; i++) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			zoom_child(c[i], x-$xpad, ratio);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function zoom_parent(e) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (e.attributes) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			if (e.attributes["x"] != undefined) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:				orig_save(e, "x");
/share/jade/SOFT/FlameGraph/flamegraph.pl:				e.attributes["x"].value = $xpad;
/share/jade/SOFT/FlameGraph/flamegraph.pl:			}
/share/jade/SOFT/FlameGraph/flamegraph.pl:			if (e.attributes["width"] != undefined) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:				orig_save(e, "width");
/share/jade/SOFT/FlameGraph/flamegraph.pl:				e.attributes["width"].value = parseInt(svg.width.baseVal.value) - ($xpad*2);
/share/jade/SOFT/FlameGraph/flamegraph.pl:			}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		if (e.childNodes == undefined) return;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		for(var i=0, c=e.childNodes; i<c.length; i++) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			zoom_parent(c[i]);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function zoom(node) { 
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var attr = find_child(node, "rect").attributes;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var width = parseFloat(attr["width"].value);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var xmin = parseFloat(attr["x"].value);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var xmax = parseFloat(xmin + width);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var ymin = parseFloat(attr["y"].value);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var ratio = (svg.width.baseVal.value - 2*$xpad) / width;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		
/share/jade/SOFT/FlameGraph/flamegraph.pl:		// XXX: Workaround for JavaScript float issues (fix me)
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var fudge = 0.0001;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var unzoombtn = document.getElementById("unzoom");
/share/jade/SOFT/FlameGraph/flamegraph.pl:		unzoombtn.style["opacity"] = "1.0";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var el = document.getElementsByTagName("g");
/share/jade/SOFT/FlameGraph/flamegraph.pl:		for(var i=0;i<el.length;i++){
/share/jade/SOFT/FlameGraph/flamegraph.pl:			var e = el[i];
/share/jade/SOFT/FlameGraph/flamegraph.pl:			var a = find_child(e, "rect").attributes;
/share/jade/SOFT/FlameGraph/flamegraph.pl:			var ex = parseFloat(a["x"].value);
/share/jade/SOFT/FlameGraph/flamegraph.pl:			var ew = parseFloat(a["width"].value);
/share/jade/SOFT/FlameGraph/flamegraph.pl:			// Is it an ancestor
/share/jade/SOFT/FlameGraph/flamegraph.pl:			if ($inverted == 0) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:				var upstack = parseFloat(a["y"].value) > ymin;
/share/jade/SOFT/FlameGraph/flamegraph.pl:			} else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:				var upstack = parseFloat(a["y"].value) < ymin;
/share/jade/SOFT/FlameGraph/flamegraph.pl:			}
/share/jade/SOFT/FlameGraph/flamegraph.pl:			if (upstack) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:				// Direct ancestor
/share/jade/SOFT/FlameGraph/flamegraph.pl:				if (ex <= xmin && (ex+ew+fudge) >= xmax) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:					e.style["opacity"] = "0.5";
/share/jade/SOFT/FlameGraph/flamegraph.pl:					zoom_parent(e);
/share/jade/SOFT/FlameGraph/flamegraph.pl:					e.onclick = function(e){unzoom(); zoom(this);};
/share/jade/SOFT/FlameGraph/flamegraph.pl:					update_text(e);
/share/jade/SOFT/FlameGraph/flamegraph.pl:				}
/share/jade/SOFT/FlameGraph/flamegraph.pl:				// not in current path
/share/jade/SOFT/FlameGraph/flamegraph.pl:				else
/share/jade/SOFT/FlameGraph/flamegraph.pl:					e.style["display"] = "none";
/share/jade/SOFT/FlameGraph/flamegraph.pl:			}
/share/jade/SOFT/FlameGraph/flamegraph.pl:			// Children maybe
/share/jade/SOFT/FlameGraph/flamegraph.pl:			else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:				// no common path
/share/jade/SOFT/FlameGraph/flamegraph.pl:				if (ex < xmin || ex + fudge >= xmax) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:					e.style["display"] = "none";
/share/jade/SOFT/FlameGraph/flamegraph.pl:				}
/share/jade/SOFT/FlameGraph/flamegraph.pl:				else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:					zoom_child(e, xmin, ratio);
/share/jade/SOFT/FlameGraph/flamegraph.pl:					e.onclick = function(e){zoom(this);};
/share/jade/SOFT/FlameGraph/flamegraph.pl:					update_text(e);
/share/jade/SOFT/FlameGraph/flamegraph.pl:				}
/share/jade/SOFT/FlameGraph/flamegraph.pl:			}
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	function unzoom() {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var unzoombtn = document.getElementById("unzoom");
/share/jade/SOFT/FlameGraph/flamegraph.pl:		unzoombtn.style["opacity"] = "0.0";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		
/share/jade/SOFT/FlameGraph/flamegraph.pl:		var el = document.getElementsByTagName("g");
/share/jade/SOFT/FlameGraph/flamegraph.pl:		for(i=0;i<el.length;i++) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			el[i].style["display"] = "block";
/share/jade/SOFT/FlameGraph/flamegraph.pl:			el[i].style["opacity"] = "1";
/share/jade/SOFT/FlameGraph/flamegraph.pl:			zoom_reset(el[i]);
/share/jade/SOFT/FlameGraph/flamegraph.pl:			update_text(el[i]);
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}	
/share/jade/SOFT/FlameGraph/flamegraph.pl:]]>
/share/jade/SOFT/FlameGraph/flamegraph.pl:</script>
/share/jade/SOFT/FlameGraph/flamegraph.pl:INC
/share/jade/SOFT/FlameGraph/flamegraph.pl:$im->include($inc);
/share/jade/SOFT/FlameGraph/flamegraph.pl:$im->filledRectangle(0, 0, $imagewidth, $imageheight, 'url(#background)');
/share/jade/SOFT/FlameGraph/flamegraph.pl:my ($white, $black, $vvdgrey, $vdgrey) = (
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$im->colorAllocate(255, 255, 255),
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$im->colorAllocate(0, 0, 0),
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$im->colorAllocate(40, 40, 40),
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$im->colorAllocate(160, 160, 160),
/share/jade/SOFT/FlameGraph/flamegraph.pl:    );
/share/jade/SOFT/FlameGraph/flamegraph.pl:$im->stringTTF($black, $fonttype, $fontsize + 5, 0.0, int($imagewidth / 2), $fontsize * 2, $titletext, "middle");
/share/jade/SOFT/FlameGraph/flamegraph.pl:$im->stringTTF($black, $fonttype, $fontsize, 0.0, $xpad, $imageheight - ($ypad2 / 2), " ", "", 'id="details"');
/share/jade/SOFT/FlameGraph/flamegraph.pl:$im->stringTTF($black, $fonttype, $fontsize, 0.0, $xpad, $fontsize * 2,
/share/jade/SOFT/FlameGraph/flamegraph.pl:    "Reset Zoom", "", 'id="unzoom" onclick="unzoom()" style="opacity:0.0;cursor:pointer"');
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:if ($palette) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	read_palette();
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# draw frames
/share/jade/SOFT/FlameGraph/flamegraph.pl:while (my ($id, $node) = each %Node) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my ($func, $depth, $etime) = split ";", $id;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $stime = $node->{stime};
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $delta = $node->{delta};
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$etime = $timemax if $func eq "" and $depth == 0;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $x1 = $xpad + $stime * $widthpertime;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $x2 = $xpad + $etime * $widthpertime;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my ($y1, $y2);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	unless ($inverted) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$y1 = $imageheight - $ypad2 - ($depth + 1) * $frameheight + $framepad;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$y2 = $imageheight - $ypad2 - $depth * $frameheight;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	} else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$y1 = $ypad1 + $depth * $frameheight;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$y2 = $ypad1 + ($depth + 1) * $frameheight - $framepad;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $samples = sprintf "%.0f", ($etime - $stime) * $factor;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	(my $samples_txt = $samples) # add commas per perlfaq5
/share/jade/SOFT/FlameGraph/flamegraph.pl:		=~ s/(^[-+]?\d+?(?=(?>(?:\d{3})+)(?!\d))|\G\d{3}(?=\d))/$1,/g;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $info;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if ($func eq "" and $depth == 0) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$info = "all ($samples_txt $countname, 100%)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	} else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $pct = sprintf "%.2f", ((100 * $samples) / ($timemax * $factor));
/share/jade/SOFT/FlameGraph/flamegraph.pl:		my $escaped_func = $func;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$escaped_func =~ s/&/&amp;/g;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$escaped_func =~ s/</&lt;/g;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$escaped_func =~ s/>/&gt;/g;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		unless (defined $delta) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$info = "$escaped_func ($samples_txt $countname, $pct%)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		} else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:			my $d = $negate ? -$delta : $delta;
/share/jade/SOFT/FlameGraph/flamegraph.pl:			my $deltapct = sprintf "%.2f", ((100 * $d) / ($timemax * $factor));
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$deltapct = $d > 0 ? "+$deltapct" : $deltapct;
/share/jade/SOFT/FlameGraph/flamegraph.pl:			$info = "$escaped_func ($samples_txt $countname, $pct%; $deltapct%)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:		}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $nameattr = { %{ $nameattr{$func}||{} } }; # shallow clone
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$nameattr->{class}       ||= "func_g";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$nameattr->{onmouseover} ||= "s('".$info."')";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$nameattr->{onmouseout}  ||= "c()";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$nameattr->{onclick}     ||= "zoom(this)";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$nameattr->{title}       ||= $info;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$im->group_start($nameattr);
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $color;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if ($func eq "-") {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$color = $vdgrey;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	} elsif (defined $delta) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$color = color_scale($delta, $maxdelta);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	} elsif ($palette) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$color = color_map($colors, $func);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	} else {
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$color = color($colors, $hash, $func);
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$im->filledRectangle($x1, $y1, $x2, $y2, $color, 'rx="2" ry="2"');
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $chars = int( ($x2 - $x1) / ($fontsize * $fontwidth));
/share/jade/SOFT/FlameGraph/flamegraph.pl:	my $text = "";
/share/jade/SOFT/FlameGraph/flamegraph.pl:	if ($chars >= 3) { #room for one char plus two dots
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$text = substr $func, 0, $chars;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		substr($text, -2, 2) = ".." if $chars < length $func;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$text =~ s/&/&amp;/g;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$text =~ s/</&lt;/g;
/share/jade/SOFT/FlameGraph/flamegraph.pl:		$text =~ s/>/&gt;/g;
/share/jade/SOFT/FlameGraph/flamegraph.pl:	}
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$im->stringTTF($black, $fonttype, $fontsize, 0.0, $x1 + 3, 3 + ($y1 + $y2) / 2, $text, "");
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:	$im->group_end($nameattr);
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:print $im->svg;
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:if ($palette) {
/share/jade/SOFT/FlameGraph/flamegraph.pl:	write_palette();
/share/jade/SOFT/FlameGraph/flamegraph.pl:}
/share/jade/SOFT/FlameGraph/flamegraph.pl:
/share/jade/SOFT/FlameGraph/flamegraph.pl:# vim: ts=8 sts=8 sw=8 noexpandtab
